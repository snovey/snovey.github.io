<!DOCTYPE html>
<html lang="zh-CN" class="typo borderbox">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<!-- <link href="//blog.snovey.com/css/style.css?v=1.0.0" rel="stylesheet" type="text/css"> -->


  <meta name="keywords" content="undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined," />







  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.0.0" />



  <link rel="canonical" href="www.snovey.com/2016/11/polysemy/"/>

<link rel="stylesheet" href="/css/style.css">
<title>雨雪霏霏</title>

</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <header class="header">
  <div class="header-wrap">
    <a href="javascript:;" id="nav-trigger" class="nav-toggle">
      <span></span>
      <span></span>
      <span></span>
    </a>
    <div class="site-meta">
      <img src="//blog.snovey.com/uploads/avatar.jpg" class="site-avatar">
      <div class="site-info">
        <div class="site-info-wrap">
          <h1 class="site-title">雨雪霏霏</h1>
          <span class="site-description">简单快乐与幸福同行</span>
        </div>
      </div>
    </div>
    <nav class="menu">
      <ul class="menu-items">
        <div class="menu-info">
          <img src="//blog.snovey.com/uploads/avatar.jpg" class="site-avatar">
          <h1 class="site-title">雨雪霏霏</h1>
          <span class="site-description">简单快乐与幸福同行</span>
        </div>
        
          <li class="menu-item">
            <a href="/" class="menu-item-link" >
              <span class="menu-item-text">首页</span>
            </a>
          </li>
        
          <li class="menu-item">
            <a href="/archives" class="menu-item-link" >
              <span class="menu-item-text">归档</span>
            </a>
          </li>
        
          <li class="menu-item">
            <a href="/tags" class="menu-item-link" >
              <span class="menu-item-text">标签</span>
            </a>
          </li>
        
          <li class="menu-item">
            <a href="/about" class="menu-item-link" >
              <span class="menu-item-text">关于</span>
            </a>
          </li>
        
      </ul>
    </nav>
  </div>
</header>

  <main class="main">
    <article class="post-detail">
  <div class="post-title">
    <h2 class="title">计算机中的一词多义</h2>
  </div>
   <div class="post-meta">
    <span class="post-time">2016-11-21</span>
  </div>
  <div class="post-content">
    <p>学习中常常遇到同一个词语出现在多个地方，其中有一部分词语让我相当的困惑：<br>为什么两个词是一样的，但是感觉没有什么联系？比如「闭包」。</p>
<a id="more"></a>
<ul>
<li>数学中的「闭包」与计算机科学中的「闭包」有什么关系？</li>
<li>内存管理中的「堆」与数据结构中的「堆」有什么关系？</li>
</ul>
<p>我目前就想到这两个，那我就说说这两个，先说答案：他们没什么关系。</p>
<h1 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h1><p>数学中的「闭包」：</p>
<blockquote>
<p>数学中，若对某个集合的成员进行一种运算，生成的仍然是这个集合的成员，则该集合被称为 <strong>在这个运算下闭合</strong> 。<br>当一个集合 S 在某个运算下不闭合的时候，我们通常可以找到包含 S 的最小的闭合集合。这个最小闭合集合被称为 S 的（关于这个运算的） <strong>闭包</strong> 。<br><span style="display:block;text-align:right;">中文维基百科</span></p>
</blockquote>
<p>计算机科学中的「闭包」：</p>
<blockquote>
<p>In programming languages, closures (also lexical closures or function closures) are techniques for implementing lexically scoped name binding in languages with first-class functions<br><span style="display:block;text-align:right;"><em>Wikipedia</em></span></p>
</blockquote>
<p>渣翻一下，大意是：</p>
<blockquote>
<p>在编程语言中， <strong>闭包</strong> （也叫 <strong>词法闭包</strong> 或 <strong>函数闭包</strong> ）是在语言中使用一等函数实现词法作用域名称绑定的技术。</p>
</blockquote>
<p>看定义他们就没什么关系，Peter J. Landin 在 1964 年将术语 <strong>闭包</strong> 定义为一种包含 <strong>环境成分</strong> 和 <strong>控制成分</strong> 的实体，来指代某些其开放绑定（自由变量）已经由其语法环境完成闭合（或者绑定）的 lambda 表达式，从而形成了 <strong>闭合的表达式</strong> ，或称闭包。在 <em>SICP</em> 中也提到了这个：</p>
<blockquote>
<p>The use of the word “closure” here comes from abstract algebra, where a set of elements is said to be closed under an operation if applying the operation to elements in the set produces an element that is again an element of the set. <strong>The Lisp community also (unfortunately) uses the word “closure” to describe a totally unrelated concept</strong>: A closure is an implementation technique for representing procedures with free.<br><span style="display:block;text-align:right;"><em>Structure and Interpretation of Computer Programs, 2nd ed. p.133</em></span></p>
</blockquote>
<p>注意加粗的部分。这里需要注意一下，维基百科对闭包的定义与我们通常意义上的闭包是有所区别的，我们通常说的闭包往往是指：</p>
<blockquote>
<p>调用一个函数 A，返回一个函数 B，其中函数 B 引用了 A 中的自由变量。我们称函数 A 使用了闭包。</p>
</blockquote>
<p>维基百科对闭包的定义是从理论角度出发的，而我们通常意义上所指的闭包是从实践角度出发的，实践角度的闭包是理论角度的一个特例。</p>
<p>「闭包」这个词不仅仅出现这两个地方，我再举几个相关的词。</p>
<p>集合论中的「自反闭包」：</p>
<blockquote>
<p>在数学中，集合 X 上的二元关系 R 的 <strong>自反闭包</strong> 是 X 上包含 R 的最小的自反关系。<br>集合 X 上的关系 R 的自反闭包 S 的定义为<br>$$<br>S=R\cup \left\lbrace(x,x):x\in X\right\rbrace<br>$$<br>换言之，R 的自反闭包是 R 与 X 上的恒等关系的并集。</p>
</blockquote>
<p>集合论中的「对称闭包」：</p>
<blockquote>
<p>在数学中，集合 X 上的二元关系 R 的 <strong>对称闭包</strong> 是 X 上包含 R 的最小的对称关系。<br>集合 X 上的关系 R 的对称闭包 S 的定义为<br>$$<br>S=R\cup \left\lbrace(x,y):(y,x)\in R\right\rbrace.\,<br>$$<br>换言之，R 的对称闭包是 R 与 X 上的逆关系的并集。</p>
</blockquote>
<p>集合论中的「传递闭包」：</p>
<blockquote>
<p>在数学中，集合 X 上的二元关系 R 的 <strong>传递闭包</strong> 是 X 上包含 R 的最小的传递关系。<br>集合 X 上的关系 R 的传递闭包 S 的定义为<br>$$<br>S=\bigcup_{i\in \lbrace 1,2,3,\ldots\rbrace} R^i.<br>$$<br>其中<br>$$<br>\begin{cases}<br>R^1 = R\,\\[2ex]<br>R^{i+1} = R \circ R^i<br>\end{cases}<br>$$<br>换言之，R 的传递闭包是 R 与 X 上的传递关系的并集。</p>
</blockquote>
<p>形式语言中的「Kleene 闭包」：</p>
<blockquote>
<p>假定<br>$$<br>V_{0}=\lbrace\epsilon \rbrace\,<br>$$<br>递归的定义集合<br>$$<br>V_{i+1}=\lbrace wv:w\in V_{i}\wedge v\in V\rbrace\, 这里的\ i&gt;0\,<br>$$<br>如果 $V$ 是一个形式语言，集合 $V$ 的第 $i$ 次幂是集合 $V$ 同自身的 i 次串接的简写。就是说， $V_{i}$ 可以被理解为是从 $V$ 中的符号形成的所有长度为 $i$ 的字符串的集合。<br>所以在 $V$ 上的 Kleene 星号的定义是</p>
</blockquote>
<p>$$<br>V^{*}=\bigcup_{i=0}^{+\infty} V_i=\left\lbrace\varepsilon \right\rbrace\cup V\cup V^{2}\cup V^{3}\cup \ldots<br>$$</p>
<p>就是说，它是从 $V$ 中的符号生成的所有可能的有限长度的字符串的并集。</p>
<p>自动机理论中的 「ε-闭包」：</p>
<blockquote>
<p>对于任何 $p\in Q$，从 p 可到达的状态的集合叫做 p 的 <strong>ε-闭包</strong> ，并写为<br>$$<br>\,E(\lbrace p\rbrace)=\lbrace q\in Q:p{\stackrel  {\epsilon }{\rightarrow }}q\rbrace。<br>$$<br>对于 $P\subset Q$ 的任何子集，定义 P 的 <strong>ε-闭包</strong> 为<br>$$<br>E(P)=\bigcup \limits _{p\in P}E(\lbrace p\rbrace)<br>$$</p>
</blockquote>
<p>纵观以上种种「闭包」，除去「词法闭包」，「闭包」都是指具备某种性质的最小集合，他们本质上的思想是一样的。而「词法闭包」与他们没有什么关系。</p>
<h1 id="堆"><a href="#堆" class="headerlink" title="堆"></a>堆</h1><p>内存管理中的「堆」：</p>
<blockquote>
<p>在计算机科学中, <strong>动态内存分配</strong> （Dynamic memory allocation）又称为 <strong>堆内存分配</strong> ，是指计算机程序在运行期中分配使用内存。它可以当成是一种分配有限内存资源所有权的方法。</p>
</blockquote>
<p>数据结构中的「堆」：</p>
<blockquote>
<p>堆（英语：Heap）是计算机科学中一类特殊的数据结构的统称。堆通常是一个可以被看做一棵树的数组对象。这种数据结构具有以下性质</p>
<ul>
<li>任意节点小于（或大于）它的所有后裔，最小元（或最大元）在堆的根上（堆序性）。</li>
<li>堆总是一棵完全树。即除了最底层，其他层的节点都被元素填满，且最底层尽可能地从左到右填入。</li>
</ul>
</blockquote>
<p>将根节点最大的堆叫做最大堆或大根堆，根节点最小的堆叫做最小堆或小根堆。</p>
<p>这两个概念毫无关系，Donald Knuth 曾多次说起此事， <em>TAOCP</em> 中提到：</p>
<blockquote>
<p>Several authors began about 1975 to call the pool of available memory a “heap.” But in the present series of books, we will use that word only in its more traditional sense related to priority queues.<br><span style="display:block;text-align:right;"> <em>The Art of Computer Programming, Third Ed., Vol. 1, p. 435</em> </span></p>
</blockquote>
<p>在 <em>CLRS</em> 中也说：</p>
<blockquote>
<p>The term “heap” was originally coined in the context of heapsort, but it has since come to refer to “garbage-collected storage,” such as the programming languages Java and Lisp provide. Our heap data structure is not garbage-collected storage, and whenever we refer to heaps in this book, we shall mean a data structure rather than an aspect of garbage collection.<br><span style="display:block;text-align:right;"> <em>Introduction to Algorithms, Third Ed, p. 151</em> </span></p>
</blockquote>
<p>内存管理中的「堆」，原意是类似「一堆衣物」的「堆」，表示没有具体的顺序，而「堆内存分配」的实现也往往是链表。与数据结构中的「堆」完全没有关系，数据结构中的「堆」源自「堆排序」。</p>
<p>参考：</p>
<ul>
<li><a href="https://zh.wikipedia.org/wiki/闭包_(数学" target="_blank" rel="external">闭包 (数学</a>)</li>
<li><a href="https://en.wikipedia.org/wiki/Closure_(computer_programming" target="_blank" rel="external">Closure (computer programming</a>)</li>
<li><em>SICP</em></li>
<li><a href="https://zh.wikipedia.org/zh-hans/自反闭包" target="_blank" rel="external">自反闭包</a></li>
<li><a href="https://zh.wikipedia.org/zh-hans/对称闭包" target="_blank" rel="external">对称闭包</a></li>
<li><a href="https://en.wikipedia.org/wiki/Transitive_closure" target="_blank" rel="external">Transitive closure</a></li>
<li><a href="https://zh.wikipedia.org/wiki/克莱尼星号" target="_blank" rel="external">克莱尼星号</a></li>
<li><a href="https://zh.wikipedia.org/wiki/非确定有限状态自动机" target="_blank" rel="external">非确定有限状态自动机</a></li>
<li><a href="https://zh.wikipedia.org/wiki/动态内存分配" target="_blank" rel="external">动态内存分配</a></li>
<li><a href="https://zh.wikipedia.org/wiki/堆_(数据结构" target="_blank" rel="external">堆 (数据结构</a>)</li>
<li><em>TAOCP</em></li>
<li><em>CLRS</em></li>
</ul>
<blockquote>版权声明<br><hr>本作品采用<a rel="external" href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可。<br>本文链接：www.snovey.com/2016/11/polysemy/</blockquote>
  </div>
</article>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


  </main>
  <footer class="footer">
  <div class="footer-wrap">
      <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
        <symbol id="cc" viewBox="0 0 1024 1024">
          <path d="M505.898681 20.48c135.168-1.364992 251.220992 45.056 348.16 139.264 96.939008 94.208 146.772992 208.896 149.504 344.064 1.364992 136.532992-45.056 253.268992-139.264 350.208-94.208 96.939008-209.579008 146.772992-346.112 149.504-135.168 1.364992-251.563008-45.396992-349.184-140.288-97.620992-94.891008-147.115008-209.92-148.48-345.088-2.731008-136.532992 43.348992-253.268992 138.24-350.208 94.891008-96.939008 210.603008-146.091008 347.136-147.456 0 0 0 0 0 0m12.288 878.592c106.496-1.364992 197.291008-40.276992 272.384-116.736 75.092992-76.459008 111.956992-168.619008 110.592-276.48-1.364992-107.860992-40.619008-198.996992-117.76-273.408-77.140992-74.411008-168.96-110.932992-275.456-109.568-107.860992 1.364992-198.996992 40.276992-273.408 116.736-74.411008 76.459008-110.932992 168.619008-109.568 276.48 1.364992 107.860992 40.276992 198.996992 116.736 273.408 76.459008 74.411008 168.619008 110.932992 276.48 109.568 0 0 0 0 0 0m-126.976-305.152c27.307008 0 47.104-13.652992 59.392-40.96 0 0 57.344 30.72 57.344 30.72-13.652992 24.576-30.72 42.324992-51.2 53.248-21.844992 13.652992-45.739008 20.48-71.68 20.48-42.324992 0-76.459008-12.971008-102.4-38.912-25.940992-24.576-38.912-60.075008-38.912-106.496 0-46.420992 12.971008-82.603008 38.912-108.544 25.940992-25.940992 58.708992-38.912 98.304-38.912 58.708992 0 101.035008 22.528 126.976 67.584 0 0-63.488 32.768-63.488 32.768-6.827008-13.652992-15.019008-23.211008-24.576-28.672-9.556992-5.460992-19.115008-8.192-28.672-8.192-40.96 0-61.44 27.988992-61.44 83.968 0 25.940992 4.779008 45.739008 14.336 59.392 12.288 15.019008 27.988992 22.528 47.104 22.528 0 0 0 0 0 0m272.384 0c28.672 0 47.787008-13.652992 57.344-40.96 0 0 59.392 30.72 59.392 30.72-12.288 21.844992-29.355008 39.595008-51.2 53.248-21.844992 13.652992-45.739008 20.48-71.68 20.48-43.691008 0-77.824-12.971008-102.4-38.912-25.940992-24.576-38.912-60.075008-38.912-106.496 0-43.691008 12.971008-79.872 38.912-108.544 25.940992-25.940992 59.392-38.912 100.352-38.912 57.344 0 98.304 22.528 122.88 67.584 0 0-61.44 32.768-61.44 32.768-6.827008-13.652992-15.019008-23.211008-24.576-28.672-9.556992-5.460992-19.115008-8.192-28.672-8.192-42.324992 0-63.488 27.988992-63.488 83.968 0 24.576 5.460992 44.372992 16.384 59.392 10.923008 15.019008 26.624 22.528 47.104 22.528 0 0 0 0 0 0" p-id="7650" fill="#ffffff"/>
        </symbol>
        <symbol id="github" viewBox="0 0 1024 1024">
          <path d="M530.01791-7.557299C672.947218-4.362634 790.76646 44.643525 885.072968 139.46118 979.315583 234.342728 1028.002276 354.462128 1031.133048 496.752503 1029.599609 610.546467 996.566773 708.558787 933.759661 795.453672 870.888656 882.412451 789.233021 940.874819 687.13153 977.230106 674.544551 978.827438 665.088342 977.230106 660.424132 972.502002 655.696028 966.176565 652.565256 959.851129 652.565256 953.525692L654.098695 814.429982C654.098695 790.725568 650.967924 771.749259 643.109048 755.967614 636.847505 740.122076 628.988629 729.068536 619.532421 721.20966 677.675322 718.014995 729.55668 699.038685 776.646041 664.280731 822.201963 631.056216 847.375922 566.268412 850.506694 471.450757 850.506694 444.551679 845.77859 419.249933 836.322382 397.142851 826.930067 374.971877 814.343087 354.462128 798.625336 337.083151 801.820001 330.757715 806.484211 314.97607 808.081544 291.207763 811.212315 267.503349 806.484211 237.473499 793.897232 202.715545 793.897232 201.118213 782.907584 201.118213 760.92829 204.248984 738.948995 207.443649 704.382721 224.822626 655.696028 254.852476 614.86821 243.798936 573.976499 237.473499 530.01791 237.473499 486.059321 237.473499 445.16761 243.798936 404.339793 254.852476 357.186538 223.225294 321.086825 207.443649 299.10753 204.248984 277.064343 201.118213 266.074695 201.118213 266.074695 202.715545 253.551609 237.473499 248.823505 267.503349 251.954276 291.207763 255.085048 314.97607 258.21582 330.757715 261.410484 337.083151 245.692733 354.462128 231.508421 373.438438 223.649545 397.142851 214.25723 419.249933 209.529126 444.551679 209.529126 472.984196 212.659898 567.865744 236.236525 631.056216 281.792447 665.878064 327.348368 700.636018 379.229726 719.612327 437.308734 722.743099 429.449859 729.068536 423.188316 736.991305 418.460211 748.044845 412.198668 759.098386 409.067897 773.346591 405.937125 789.128236 388.622041 798.648337 366.642747 801.779109 336.804576 800.24567 306.966406 798.648337 281.792447 781.26936 259.813152 746.447513 248.823505 729.068536 237.833857 716.417663 223.649545 708.558787 209.529126 700.636018 197.00604 695.907914 181.288289 694.310581 168.701309 692.713249 160.842433 694.310581 157.711662 700.636018 154.58089 705.364122 160.842433 713.286891 176.560184 724.340431 192.277936 735.393972 204.801022 746.447513 212.659898 759.098386 220.518774 771.749259 226.84421 785.997464 233.105753 798.648337 240.964629 819.158086 258.21582 836.600956 286.520551 850.785269 313.227949 865.033474 352.522328 866.630807 402.74246 857.110705L404.339793 950.39492C404.339793 958.317689 401.209021 964.643126 396.480917 969.37123 391.752813 975.696667 382.360498 977.230106 369.773518 974.099334 267.672028 939.34138 185.952499 877.684347 123.145387 792.322901 60.274382 706.961454 28.902772 607.351802 27.30544 495.155171 30.436212 351.267463 79.122905 232.745395 173.429413 137.927741 267.672028 43.046193 387.024709-5.959967 528.420578-9.090738L530.01791-7.557299Z" p-id="2568" fill="#ffffff"/>
        </symbol>
        <symbol id="mail" viewBox="0 0 1024 1024">
          <path d="M854.016 342.016l0-86.016-342.016 214.016-342.016-214.016 0 86.016 342.016 212.010667zM854.016 169.984q34.005333 0 59.008 25.984t25.002667 59.989333l0 512q0 34.005333-25.002667 59.989333t-59.008 25.984l-683.989333 0q-34.005333 0-59.008-25.984t-25.002667-59.989333l0-512q0-34.005333 25.002667-59.989333t59.008-25.984l683.989333 0z" p-id="4834" fill="#ffffff"/>
        </symbol>
        <symbol id="rss" viewBox="0 0 1024 1024">
          <path d="M329.142857 768q0 45.714286-32 77.714286t-77.714286 32-77.714285-32-32-77.714286 32-77.714286 77.714285-32 77.714286 32 32 77.714286z m292.571429 70.285714q1.142857 16-9.714286 27.428572-10.285714 12-26.857143 12H508q-14.285714 0-24.571429-9.428572t-11.428571-23.714285q-12.571429-130.857143-105.428571-223.714286T142.857143 515.428571q-14.285714-1.142857-23.714286-11.428571T109.714286 479.428571V402.285714q0-16.571429 12-26.857143 9.714286-9.714286 24.571428-9.714285h2.857143q91.428571 7.428571 174.857143 46T472 515.428571q65.142857 64.571429 103.714286 148t46 174.857143z m292.571428 1.142857q1.142857 15.428571-10.285714 26.857143-10.285714 11.428571-26.285714 11.428572h-81.714286q-14.857143 0-25.428571-10T759.428571 843.428571q-6.857143-122.857143-57.714285-233.428571t-132.285715-192-192-132.285714T144 227.428571q-14.285714-0.571429-24.285714-11.142857T109.714286 191.428571V109.714286q0-16 11.428571-26.285715 10.285714-10.285714 25.142857-10.285714h1.714286q149.714286 7.428571 286.571429 68.571429T677.714286 309.714286q106.857143 106.285714 168 243.142857t68.571428 286.571428z" fill="#ffffff" p-id="6818"/>
        </symbol>
      </svg>
    <div class="footer-wrap-inner">
      <a class="symbol" href="//github.com/snovey">
        <svg class="icon">
          <use xlink:href="#github"></use>
          </svg>
      </a>
      <a class="symbol" href="//creativecommons.org/licenses/by-nc-nd/4.0/">
        <svg class="icon">
          <use xlink:href="#cc"></use>
          </svg>
      </a>
      <a class="symbol" href="/atom.xml">
        <svg class="icon">
          <use xlink:href="#rss"></use>
          </svg>
      </a>
      <p class="copyright">
        雨雪霏霏 &copy; 2016-2017
      </p>
      <p class="info">
        Power by <a href="//hexo.io">hexo</a> &#124; Theme plain &#124; Host on <a href="//github.com">GitHub</a>, <a href="//coding.net">Coding</a>
      </p>
    </div>
  </div>
</footer>
<script>
  /*! lazysizes - v4.0.0-rc3 */
!function(a,b){var c=b(a,a.document);a.lazySizes=c,"object"==typeof module&&module.exports&&(module.exports=c)}(window,function(a,b){"use strict";if(b.getElementsByClassName){var c,d,e=b.documentElement,f=a.Date,g=a.HTMLPictureElement,h="addEventListener",i="getAttribute",j=a[h],k=a.setTimeout,l=a.requestAnimationFrame||k,m=a.requestIdleCallback,n=/^picture$/i,o=["load","error","lazyincluded","_lazyloaded"],p={},q=Array.prototype.forEach,r=function(a,b){return p[b]||(p[b]=new RegExp("(\\s|^)"+b+"(\\s|$)")),p[b].test(a[i]("class")||"")&&p[b]},s=function(a,b){r(a,b)||a.setAttribute("class",(a[i]("class")||"").trim()+" "+b)},t=function(a,b){var c;(c=r(a,b))&&a.setAttribute("class",(a[i]("class")||"").replace(c," "))},u=function(a,b,c){var d=c?h:"removeEventListener";c&&u(a,b),o.forEach(function(c){a[d](c,b)})},v=function(a,d,e,f,g){var h=b.createEvent("CustomEvent");return e||(e={}),e.instance=c,h.initCustomEvent(d,!f,!g,e),a.dispatchEvent(h),h},w=function(b,c){var e;!g&&(e=a.picturefill||d.pf)?e({reevaluate:!0,elements:[b]}):c&&c.src&&(b.src=c.src)},x=function(a,b){return(getComputedStyle(a,null)||{})[b]},y=function(a,b,c){for(c=c||a.offsetWidth;c<d.minSize&&b&&!a._lazysizesWidth;)c=b.offsetWidth,b=b.parentNode;return c},z=function(){var a,c,d=[],e=[],f=d,g=function(){var b=f;for(f=d.length?e:d,a=!0,c=!1;b.length;)b.shift()();a=!1},h=function(d,e){a&&!e?d.apply(this,arguments):(f.push(d),c||(c=!0,(b.hidden?k:l)(g)))};return h._lsFlush=g,h}(),A=function(a,b){return b?function(){z(a)}:function(){var b=this,c=arguments;z(function(){a.apply(b,c)})}},B=function(a){var b,c=0,d=125,e=666,g=e,h=function(){b=!1,c=f.now(),a()},i=m?function(){m(h,{timeout:g}),g!==e&&(g=e)}:A(function(){k(h)},!0);return function(a){var e;(a=a===!0)&&(g=44),b||(b=!0,e=d-(f.now()-c),0>e&&(e=0),a||9>e&&m?i():k(i,e))}},C=function(a){var b,c,d=99,e=function(){b=null,a()},g=function(){var a=f.now()-c;d>a?k(g,d-a):(m||e)(e)};return function(){c=f.now(),b||(b=k(g,d))}},D=function(){var g,l,m,o,p,y,D,F,G,H,I,J,K,L,M=/^img$/i,N=/^iframe$/i,O="onscroll"in a&&!/glebot/.test(navigator.userAgent),P=0,Q=0,R=0,S=-1,T=function(a){R--,a&&a.target&&u(a.target,T),(!a||0>R||!a.target)&&(R=0)},U=function(a,c){var d,f=a,g="hidden"==x(b.body,"visibility")||"hidden"!=x(a,"visibility");for(F-=c,I+=c,G-=c,H+=c;g&&(f=f.offsetParent)&&f!=b.body&&f!=e;)g=(x(f,"opacity")||1)>0,g&&"visible"!=x(f,"overflow")&&(d=f.getBoundingClientRect(),g=H>d.left&&G<d.right&&I>d.top-1&&F<d.bottom+1);return g},V=function(){var a,f,h,j,k,m,n,p,q,r=c.elements;if((o=d.loadMode)&&8>R&&(a=r.length)){f=0,S++,null==K&&("expand"in d||(d.expand=e.clientHeight>500&&e.clientWidth>500?500:370),J=d.expand,K=J*d.expFactor),K>Q&&1>R&&S>2&&o>2&&!b.hidden?(Q=K,S=0):Q=o>1&&S>1&&6>R?J:P;for(;a>f;f++)if(r[f]&&!r[f]._lazyRace)if(O)if((p=r[f][i]("data-expand"))&&(m=1*p)||(m=Q),q!==m&&(y=innerWidth+m*L,D=innerHeight+m,n=-1*m,q=m),h=r[f].getBoundingClientRect(),(I=h.bottom)>=n&&(F=h.top)<=D&&(H=h.right)>=n*L&&(G=h.left)<=y&&(I||H||G||F)&&(d.loadHidden||"hidden"!=x(r[f],"visibility"))&&(l&&3>R&&!p&&(3>o||4>S)||U(r[f],m))){if(ba(r[f]),k=!0,R>9)break}else!k&&l&&!j&&4>R&&4>S&&o>2&&(g[0]||d.preloadAfterLoad)&&(g[0]||!p&&(I||H||G||F||"auto"!=r[f][i](d.sizesAttr)))&&(j=g[0]||r[f]);else ba(r[f]);j&&!k&&ba(j)}},W=B(V),X=function(a){s(a.target,d.loadedClass),t(a.target,d.loadingClass),u(a.target,Z),v(a.target,"lazyloaded")},Y=A(X),Z=function(a){Y({target:a.target})},$=function(a,b){try{a.contentWindow.location.replace(b)}catch(c){a.src=b}},_=function(a){var b,c=a[i](d.srcsetAttr);(b=d.customMedia[a[i]("data-media")||a[i]("media")])&&a.setAttribute("media",b),c&&a.setAttribute("srcset",c)},aa=A(function(a,b,c,e,f){var g,h,j,l,o,p;(o=v(a,"lazybeforeunveil",b)).defaultPrevented||(e&&(c?s(a,d.autosizesClass):a.setAttribute("sizes",e)),h=a[i](d.srcsetAttr),g=a[i](d.srcAttr),f&&(j=a.parentNode,l=j&&n.test(j.nodeName||"")),p=b.firesLoad||"src"in a&&(h||g||l),o={target:a},p&&(u(a,T,!0),clearTimeout(m),m=k(T,2500),s(a,d.loadingClass),u(a,Z,!0)),l&&q.call(j.getElementsByTagName("source"),_),h?a.setAttribute("srcset",h):g&&!l&&(N.test(a.nodeName)?$(a,g):a.src=g),f&&(h||l)&&w(a,{src:g})),a._lazyRace&&delete a._lazyRace,t(a,d.lazyClass),z(function(){(!p||a.complete&&a.naturalWidth>1)&&(p?T(o):R--,X(o))},!0)}),ba=function(a){var b,c=M.test(a.nodeName),e=c&&(a[i](d.sizesAttr)||a[i]("sizes")),f="auto"==e;(!f&&l||!c||!a[i]("src")&&!a.srcset||a.complete||r(a,d.errorClass))&&(b=v(a,"lazyunveilread").detail,f&&E.updateElem(a,!0,a.offsetWidth),a._lazyRace=!0,R++,aa(a,b,f,e,c))},ca=function(){if(!l){if(f.now()-p<999)return void k(ca,999);var a=C(function(){d.loadMode=3,W()});l=!0,d.loadMode=3,W(),j("scroll",function(){3==d.loadMode&&(d.loadMode=2),a()},!0)}};return{_:function(){p=f.now(),c.elements=b.getElementsByClassName(d.lazyClass),g=b.getElementsByClassName(d.lazyClass+" "+d.preloadClass),L=d.hFac,j("scroll",W,!0),j("resize",W,!0),a.MutationObserver?new MutationObserver(W).observe(e,{childList:!0,subtree:!0,attributes:!0}):(e[h]("DOMNodeInserted",W,!0),e[h]("DOMAttrModified",W,!0),setInterval(W,999)),j("hashchange",W,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(a){b[h](a,W,!0)}),/d$|^c/.test(b.readyState)?ca():(j("load",ca),b[h]("DOMContentLoaded",W),k(ca,2e4)),c.elements.length?(V(),z._lsFlush()):W()},checkElems:W,unveil:ba}}(),E=function(){var a,c=A(function(a,b,c,d){var e,f,g;if(a._lazysizesWidth=d,d+="px",a.setAttribute("sizes",d),n.test(b.nodeName||""))for(e=b.getElementsByTagName("source"),f=0,g=e.length;g>f;f++)e[f].setAttribute("sizes",d);c.detail.dataAttr||w(a,c.detail)}),e=function(a,b,d){var e,f=a.parentNode;f&&(d=y(a,f,d),e=v(a,"lazybeforesizes",{width:d,dataAttr:!!b}),e.defaultPrevented||(d=e.detail.width,d&&d!==a._lazysizesWidth&&c(a,f,e,d)))},f=function(){var b,c=a.length;if(c)for(b=0;c>b;b++)e(a[b])},g=C(f);return{_:function(){a=b.getElementsByClassName(d.autosizesClass),j("resize",g)},checkElems:g,updateElem:e}}(),F=function(){F.i||(F.i=!0,E._(),D._())};return function(){var b,c={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0};d=a.lazySizesConfig||a.lazysizesConfig||{};for(b in c)b in d||(d[b]=c[b]);a.lazySizesConfig=d,k(function(){d.init&&F()})}(),c={cfg:d,autoSizer:E,loader:D,init:F,uP:w,aC:s,rC:t,hC:r,fire:v,gW:y,rAF:z}}});
</script>

  <script>
    function toggleClassMenu() {
      myMenu.classList.add("menu--animatable")
      if(!myMenu.classList.contains("menu--visible")) {
        myMenu.classList.add("menu--visible")
      } else {
        myMenu.classList.remove('menu--visible')
      }
      if(!oppMenu.classList.contains("toggle-animate")) {
        oppMenu.classList.add("toggle-animate")
      } else {
        oppMenu.classList.remove("toggle-animate")
      }
    }

    function OnTransitionEnd() {
      myMenu.classList.remove("menu--animatable")
      // oppMenu.classList.remove("toggle-animate")
    }

    var myMenu = document.querySelector(".menu")
    var oppMenu = document.querySelector("#nav-trigger")
    myMenu.addEventListener("transitionend", OnTransitionEnd, false)
    oppMenu.addEventListener("click", toggleClassMenu, false)
    myMenu.addEventListener("click", toggleClassMenu, false)
  </script>
</body>
</html>
